@model Blog
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = Model.Title + " | کلینیک شنوایی و سمعک شکوه تجریش";
}
@{
    GladcherryShopping.Models.ApplicationDbContext db = new GladcherryShopping.Models.ApplicationDbContext();
}
@using System.Data.Entity;
@using System.Linq;
@using System.Data.Entity;
@using DataLayer.Models;
@section Metas {
    <meta name="description" content="@Model.MetaDesc">
    <link rel="canonical" href="@string.Format("{0}{1}", "http://tajrish-samak.ir", Request.Path)">
    <meta name="Keywords" content="@Model.MetaKey">
    <meta property="og:title" content="کلینیک شنوایی و سمعک شکوه تجریش | @Model.Title" />
    <meta name="twitter:description" content="@Model.MetaDesc" />
    @if (Model.Images.Count() > 0)
    {
        <meta property="og:image" content="@string.Format("{0}{1}", "http://tajrish-samak.ir", Model.Images.FirstOrDefault().FullPath)" />
        <meta name="twitter:image" content="@string.Format("{0}{1}", "http://tajrish-samak.ir", Model.Images.FirstOrDefault().FullPath)" />
    }
    else
    {
        <meta property="og:image" content="http://tajrish-samak.ir/images/logo_purple.png" />
        <meta name="twitter:image" content="http://tajrish-samak.ir/images/logo_purple.png">
    }
    <meta name="twitter:label1" content="زمان خواندن" />
    <meta name="twitter:data1" content="5 دقیقه" />
    <meta property="article:tag" content="@Model.Title" />
    <meta property="article:published_time" content="@GladCherryShopping.Helpers.FunctionsHelper.GetPersianDateTime((DateTime)Model.CreateDate,true,true)" />
    <meta property="article:section" content="@Model.Category.PersianName" />
    <meta property="og:url" content="@Request.Url.AbsoluteUri" />
    <meta name="twitter:title" content="@Model.Title" />
    <meta property="og:site_name" content="کلینیک شنوایی و سمعک شکوه تجریش" />
    <meta property="og:locale" content="fa_IR" />
    <meta property="og:type" content="article" />
}

@section Styles{
    @{
        var url = "https://tajrish-samak.ir";
        var body = Html.Raw(Model.Body);
        var body2 = Html.Raw(Model.Body);
        <link href="~/css/blog.css?v=1.0" rel="stylesheet" />
    }
    @if (Model.Images.Count() > 0)
    {
        <script type="application/ld+json">
            {
            "@@context": "http://schema.org",
            "author": {
            "@@type": "Person",
            "name": "کلینیک شنوایی و سمعک شکوه تجریش"
            },
            "@@type": "BlogPosting",
            "mainEntityOfPage":"/blog/@Model.Id/@Model.SefUrl",
            "headline": "@Model.Title",
            "about": "@Model.Title",
            "alternativeHeadline": "@Model.Title.ToString()",
            "image": "@url@Model.Images.FirstOrDefault().FullPath",
            "award": "Best article ever written",
            "editor": "کلینیک شنوایی و سمعک شکوه تجریش",
            "keywords": "@Model.MetaKey",
            "publisher": {
            "@@type": "organization",
            "name": "کلینیک شنوایی و سمعک شکوه تجریش",
            "logo": {
            "@@type": "ImageObject",
            "url": "http://tajrish-samak.ir/images/logo_purple.png"
            }
            },
            "inLanguage":"fa-IR",
            "wordcount": "@Model.Body.Count()",
            "genre":"@Model.Category.PersianName",
            "url": "@Request.Url.AbsoluteUri",
            "datePublished": "@Model.CreateDate.Value.Date",
            "dateCreated": "@Model.CreateDate.Value.Date",
            "dateModified": "@Model.CreateDate.Value.Date",
            "description": "@Model.Title.ToString()",
            "articleBody": "@Model.Title"
            }
        </script>
    }
    else
    {
        <script type="application/ld+json">
            {
            "@@context": "http://schema.org",
            "author": {
            "@@type": "Person",
            "name": "کلینیک شنوایی و سمعک شکوه تجریش"
            },
            "@@type": "BlogPosting",
            "mainEntityOfPage":"/blog/@Model.Id/@Model.SefUrl",
            "headline": "@Model.Title",
            "about": "@Model.Title",
            "alternativeHeadline": "@Model.Title.ToString()",
            "image": "http://tajrish-samak.ir/images/logo_purple.png",
            "award": "Best article ever written",
            "editor": "کلینیک شنوایی و سمعک شکوه تجریش",
            "keywords": "@Model.MetaKey",
            "publisher": {
            "@@type": "organization",
            "name": "کلینیک شنوایی و سمعک شکوه تجریش",
            "logo": {
            "@@type": "ImageObject",
            "url": "http://tajrish-samak.ir/images/logo_purple.png"
            }
            },
            "inLanguage":"fa-IR",
            "wordcount": "@Model.Body.Count()",
            "genre":"@Model.Category.PersianName",
            "datePublished": "@Model.CreateDate.Value.Date",
            "dateCreated": "@Model.CreateDate.Value.Date",
            "dateModified": "@Model.CreateDate.Value.Date",
            "description": "@Model.Title.ToString()",
            "articleBody": "@Model.Title"
            }
        </script>
    }

    @if (Model.Images.Count() > 0)
    {
        <script type="application/ld+json">
            {
            "@@context": "http://schema.org",
            "@@type": "BreadcrumbList",
            "itemListElement": [{
            "@@type": "ListItem",
            "position": 1,
            "item": {
            "@@id": "http://tajrish-samak.ir",
            "name": "کلینیک شنوایی و سمعک شکوه تجریش",
            "image": "http://tajrish-samak.ir/images/logo_purple.png"
            }
            },{
            "@@type": "ListItem",
            "position": 2,
            "item": {
            "@@id": "@Request.Url.AbsoluteUri",
            "name": "کلینیک شنوایی و سمعک شکوه تجریش",
            "image": "@url@Model.Images.FirstOrDefault().FullPath"
            }
            }]
            }
        </script>
    }
    else
    {
        <script type="application/ld+json">
            {
            "@@context": "http://schema.org",
            "@@type": "BreadcrumbList",
            "itemListElement": [{
            "@@type": "ListItem",
            "position": 1,
            "item": {
            "@@id": "http://tajrish-samak.ir",
            "name": "کلینیک شنوایی و سمعک شکوه تجریش",
            "image": "http://tajrish-samak.ir/images/logo_purple.png"
            }
            },{
            "@@type": "ListItem",
            "position": 2,
            "item": {
            "@@id": "@Request.Url.AbsoluteUri",
            "name": "کلینیک شنوایی و سمعک شکوه تجریش",
            "image": "http://tajrish-samak.ir/images/logo_purple.png"
            }
            }]
            }
        </script>
    }
}

@if (TempData["Error"] != null)
{
    <div class="container text-center" style="direction:rtl !important;">
        <div class="wrapper wrapper-content animated fadeIn">
            <div class="row">
                <div class="col-lg-12">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <div class="ibox-content">
                                <div class="alert alert-danger">
                                    @TempData["Error"]
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

@if (TempData["Success"] != null)
{
    <div class="container text-center" style="direction:rtl !important;">
        <div class="wrapper wrapper-content animated fadeIn">
            <div class="row">
                <div class="col-lg-12">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <div class="ibox-content">
                                <div class="alert alert-success">
                                    @TempData["Success"]
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

<!-- single -->
<section class="bottom-banner-w3layouts">
    <div class="container py-md-3">
        <h1 class="heading text-center mb-sm-5 mb-4" title="@Model.Title">@Model.Title </h1>
        <div class="row inner-sec-w3ls-agileinfo">
            <!--left-->
            <div class="col-lg-8 left-blog-info text-left">
                <div class="card">
                    <a href="">
                        @if (Model.Images.Count() > 0)
                        {
                            var ig = Model.Images.Where(current => current.Extension.Contains("jpeg") || current.Extension.Contains("gif") || current.Extension.Contains("png") || current.Extension.Contains("jpg") || current.Extension.Contains("webp")).FirstOrDefault();
                            if (ig != null)
                            {
                                string img = ig.FullPath;
                                <img src="@img" alt="@Model.Title" title="@Model.Title" class="card-img-top img-fluid" />
                            }
                            var vd = Model.Images.Where(current => current.Extension.Contains("mp4") || current.Extension.Contains("mpeg") || current.Extension.Contains("wmv")).FirstOrDefault();
                            if (vd != null)
                            {
                                string vid = vd.FullPath;
                                <video width="400" src="@vid" controls style="height:auto !important;width:100% !important;height:auto !important;"></video>
                            }
                        }
                    </a>
                    <div class="card-body">
                        <ul class="blog-icons my-4">
                            <li>
                                <a href="#">
                                    <span class="fa fa-calendar"></span> @GladCherryShopping.Helpers.FunctionsHelper.GetPersianDateTime((DateTime)Model.CreateDate, false, false)
                                </a>
                            </li>
                            <li class="mx-2">
                                <a href="#">
                                    <span class="fa fa-comment"></span> @Model.Comments.Count
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <span class="fa fa-eye"></span> @Model.Survey
                                </a>
                            </li>

                        </ul>
                        <div class="body-blog">
                            @Html.Raw(Model.Body)
                        </div>
                    </div>
                </div>
            </div>
            <!--//left-->
            <!--right-->
            <aside class="col-lg-4 right-blog-con text-left right-blog">
                <div class="right-blog-info text-left card">
                    <div class="tech-btm">
                        <h4>عضویت در خبرنامه</h4>
                        <p>با عضویت در خبرنامه تازه ترین های کلینیک شنوایی و سمعک شکوه تجریش را دریافت کنید</p>
                        <form action="#" method="post">
                            <input id="textnews" class="form-control" type="email" placeholder="ایمیل معتبر" required>
                            <input id="btntext" class="form-control" type="submit" value="ثبت">
                        </form>
                        <div class="text-center">
                            <h6 class="newsletter"><i id="msg"></i></h6>
                        </div>
                    </div>
                    <div class="tech-btm">
                        <h4>مطالب پربازدید</h4>
                        @foreach (var item in db.Blogs.Where(current => current.IsVisible == true && current.CategoryId == Model.CategoryId && current.Id != Model.Id).OrderByDescending(current => current.Survey).Include(current => current.Images).Take(2))
                        {
                            <div class="blog-grids row mb-3">
                                <div class="col-md-5 blog-grid-left">
                                    <a title="@item.Title" href="/blog/@item.Id/@item.SefUrl">
                                        @if (item.Images.Count() > 0)
                                        {
                                            var ig = item.Images.Where(current => current.Extension.Contains("jpeg") || current.Extension.Contains("gif") || current.Extension.Contains("png") || current.Extension.Contains("jpg") || current.Extension.Contains("webp")).FirstOrDefault();
                                            if (ig != null)
                                            {
                                                string img = ig.FullPath;
                                                <img src="@img" alt="@item.Title" title="@item.Title" class="card-img-top img-fluid" />
                                            }
                                            var vd = item.Images.Where(current => current.Extension.Contains("mp4") || current.Extension.Contains("mpeg") || current.Extension.Contains("wmv")).FirstOrDefault();
                                            if (vd != null)
                                            {
                                                string vid = vd.FullPath;
                                                <video width="400" src="@vid" controls style="height:auto !important;width:100% !important;height:auto !important;"></video>
                                            }
                                        }
                                    </a>
                                </div>
                                <div class="col-md-7 blog-grid-right">
                                    <h5>
                                        <a title="@item.Title" href="/blog/@item.Id/@item.SefUrl">@item.Title </a>
                                    </h5>
                                    <div class="sub-meta">
                                        <span>
                                            <span class="fa fa-clock-o"></span> @GladCherryShopping.Helpers.FunctionsHelper.GetPersianDateTime((DateTime)item.CreateDate, false, false)
                                        </span>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                    <div class="tech-btm widget_social text-center">
                        <h4>کلینیک شنوایی و سمعک شکوه تجریش در شبکه های اجتماعی</h4>
                        <ul>
                            <li>
                                <a class="whatsapp" href="https://wa.me/+989393388985">
                                    <span class="count">واتساپ</span>
                                </a>
                            </li>
                            @*<li>
                                <a class="twitter" href="#">
                                    <span class="count">توئیتر</span>
                                </a>
                            </li>
                            <li>
                                <a class="facebook" href="#">
                                    <span class="count">فیس بوک</span>
                                </a>
                            </li>*@
                            <li>
                                <a target="_blank" rel="noreferrer" class="instagram" href="https://www.instagram.com/tajrishsamak/">
                                    <span class="count">اینستاگرام</span>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" rel="noreferrer" class="telegram" href="https://www.telegram.me/sthc/">
                                    <span class="count">تلگرام</span>
                                </a>
                            </li>
                            @*<li>
                                <a class="youtube" href="#">
                                    <span class="count">یوتیوب</span>
                                </a>
                            </li>
                            <li>
                                <a class="linkedin-in" href="#">
                                    <span class="count">لینکدین</span>
                                </a>
                            </li>*@
                        </ul>
                    </div>
                </div>
            </aside>
            <div class="row">
                <div class="col-md-12">
                    @if (Model.BlogComments.Where(current => current.IsApprove == true).Count() > 0)
            {
                        <div class="comment-top text-right">
                            <h4>نظرات</h4>
                            @foreach (var item in Model.BlogComments.Where(current => current.IsApprove == true).ToList())
                            {
                                <div class="media">
                                    <img src="~/images/user_chat.webp" alt="کاربر کلینیک شنوایی و سمعک شکوه تجریش" title="کاربر کلینیک شنوایی و سمعک شکوه تجریش" class="img-fluid rounded comment-user">
                                    <div class="media-body">
                                        @if (item.FullName != null)
                                        {
                                            <h5 class="mt-sm-0 mt-3">@item.FullName</h5>
                                        }
                                        else
                                        {
                                            <h5 class="mt-sm-0 mt-3">کاربر کلینیک شنوایی و سمعک شکوه تجریش</h5>
                                        }
                                        <p>
                                            @item.Text
                                        </p>
                                    </div>
                                </div>
                            }
                        </div>
                        <br />
                    }
                    <div class="comment-top card">
                        <h4>دیدگاه خود را بیان کنید</h4>
                        <div class="comment-bottom">
                            <form method="post" action="/blog/SubmitComment">
                                @Html.AntiForgeryToken()
                                <input class="form-control" type="text" name="FullName" placeholder="نام و نام خانوادگی" required>
                                <textarea class="form-control" name="Text" placeholder="متن پیام . . ." requireds></textarea>
                                <input type="hidden" value="@Model.Id" name="BlogId" />
                                <button type="submit" class="btn btn-primary submit">ثبت</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- //contact -->

@section Scripts{

}



